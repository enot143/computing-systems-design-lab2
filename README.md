# computing-systems-design-lab2

## Цели работы
1. Изучить протокол передачи данных по интерфейсу UART.
2. Получить базовые знания об организации системы прерываний в микроконтроллерах
на примере микроконтроллера STM32.
3. Изучить устройство и принципы работы контроллера интерфейса UART, получить
навыки организации обмена данными по UART в режимах опроса и прерываний.
## Задание
Разработать и реализовать два варианта драйверов UART для стенда SDK-1.1M: с
использованием и без использования прерываний. Драйверы, использующие прерывания,
должны обеспечивать работу в «неблокирующем» режиме (возврат из функции происходит
72
сразу же, без ожидания окончания приема/отправки), а также буферизацию данных для
исключения случайной потери данных. В драйвере, не использующем прерывания, функция
приема данных также должна быть «неблокирующей», то есть она не должна зависать до
приема данных (которые могут никогда не поступить). При использовании режима «без
прерываний» прерывания от соответствующего блока UART должны быть запрещены.
Написать с использованием разработанных драйверов программу, которая выполняет
определенную вариантом задачу. Для всех вариантов должно быть реализовано два режима
работы программы: с использованием и без использования прерываний. Каждый
принимаемый стендом символ должен отсылаться обратно, чтобы он был выведен в консоли
(так называемое «эхо»). Каждое новое сообщение от стенда должно выводиться с новой
строки. Если вариант предусматривает работу с командами, то на каждую команду должен
выводиться ответ, определенный в задании или «ОК», если ответ не требуется. Если введена
команда, которая не поддерживается, должно быть выведено сообщение об этом.

### Вариант 2
Доработать программу «гирлянда», реализовав возможность добавления четырѐх
новых последовательностей миганий светодиодов с индивидуальной настройкой частоты
переключения состояний для каждой последовательности. Каждая вводимая
последовательность должна иметь от двух до восьми состояний. В один момент времени
может гореть только один светодиод (или не гореть ни один). Смена отображаемой в данный
момент последовательности должна осуществляться нажатием кнопки или командой,
посылаемой через UART.
Должны обрабатываться следующие команды, посылаемые через UART:
- new xx… – ввести новую последовательность, где «x» – это одна из букв g, r, y, n («g»
соответствует включению зелѐного светодиода, «r» – красного, «y» – жѐлтого, «n»
означает, что ни один светодиод не горит); количество вводимых значений «x» может
быть от двух до восьми, ввод завершается либо по нажатию Enter, либо после ввода
восьми значений; после окончания ввода последовательности мерцаний стенд должен
послать сообщение произвольного содержания, приглашающее ввести частоту
мерцаний светодиодов (должны предусматриваться минимум три градации); ввод
частоты мерцаний заканчивается по нажатию Enter; новой последовательности
присваивается очередной свободный номер от 5 до 8; если уже есть 8
последовательностей, то переопределяется последовательность 5 и т.д.; номер новой
сохраненной последовательности выводится в UART;
- set х – сделать активной последовательность мерцаний х, где х – порядковый номер;
- set interrupts on или set interrupts off – включить или выключить прерывания.
